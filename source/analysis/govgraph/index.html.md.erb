---
title: How the GOV.UK Knowledge Graph works
weight: 33
last_reviewed_on: 2022-02-02
review_in: 6 months
---

# How the GOV.UK Knowledge Graph works

A [knowledge graph](https://www.turing.ac.uk/research/interest-groups/knowledge-graphs) is a collection of objects or nodes, linked together by relationships or links, representing statements or facts about a specific domain.

For example, in the statement “Passport #23431 is owned by John Smith”:

- “Passport #23431” and “John Smith” are subject and object nodes
- “is owned by” is a link between these nodes

The [GOV.UK Knowledge Graph](https://github.com/alphagov/govuk-knowledge-graph), also known as govGraph, is a knowledge graph that:

- combines structural GOV.UK information with user behaviour into a single data structure
- uses this data structure to build a knowledge graph with nodes that represent real-life concepts such as person name and address

The Knowledge Graph allows you to:

- explore graph databases and knowledge graphs for GOV.UK applications
- collaborate with other teams and communities to help them find content more easily
- build products and applications that tell users about our content, such as the weighted PageRank algorithm
- improve colleagues’ data literacy so they can make better use of GOV.UK data
- provide early adopters with access and training to help increase use of our data applications and product

## Data sources

The Knowledge Graph has 4 data sources:

- the [Content Store](https://github.com/alphagov/content-store)
- the [GOV.UK Publishing API](https://github.com/alphagov/publishing-api)
- the [GOV.UK Organisations API](link: https://www.api.gov.uk/gds/gov-uk-organisations/#gov-uk-organisations)
- BigQuery Google Analytics data

### Content Store

The Content Store is used to build a structural network. In the structural network:

- the network nodes are GOV.UK content items, mostly corresponding to pages on GOV.UK
- the network edges are hyperlinks between those content items

In this context, a page is a GOV.UK content item, not a URL.

The Content Store is also used to create:

- node labels or node categories, like Brexit or Farming
- additional nodes like Taxon, Step-by-Step and Chapter nodes
- relationships between nodes and/or node types types to the graph, like "has_taxon", "has_organisation"

### Publishing API and the Organisations API are

The Publishing API and the Organisations API are used to enrich the network of content-item nodes by linking these nodes to content metadata such as publishing organisation, departmental organisation and people within these organisations.

### Google Analytics

Google Analytics data from 2 days before is used to build a functional network.

This network visualises user movement between specified content items (pages), which captures how users are navigating to and from these pages.

## Create the Knowledge Graph

There is one instance of the Knowledge Graph, the [user-facing Knowledge Graph](https://knowledge-graph.integration.govuk.digital:7473/browser/) that content designers use to answer common content questions.

1. To create the Knowledge Graph instance, every day at 5am the following applications are automatically run in sequence:
  - [`app-data-science`](https://github.com/alphagov/govuk-aws/tree/master/terraform/projects/app-data-science)
  - [`app-knowledge-graph`](https://github.com/alphagov/govuk-aws/blob/master/terraform/projects/app-knowledge-graph)

1. The `app-data-science` application runs the [`build_knowledge_graph_data` Python script](https://github.com/alphagov/govuk-knowledge-graph/blob/master/build_knowledge_graph_data). This script generates [intermediate data files](/analysis/govgraph/int-data-files/) from the 4 data sources and copies those files to these AWS S3 buckets:
  - `govuk-data-infrastructure-integration` in these subdirectories:
      - `knowldge_graph`
      - `structural_network`
      - `functional-network/DATE/`
  - `govuk-related-links-integration`

1. The `app-knowledge-graph` application runs the [`provision_knowledge_graph` bash script](https://github.com/alphagov/govuk-knowledge-graph/blob/master/provision_knowledge_graph) to build the user-facing Knowledge Graph instance from the intermediate data files. This bash script:
  - builds the Neo4J instance
  - downloads aggregated functional edges that are generated daily from the previous 3 weeks (2 days prior)
  - uses cypher queries to create nodes and add relationships between nodes and properties (if available) in `src/neo4j`

The Knowledge Graph instance is password-protected. [Ask the GOV.UK Data Labs team on Slack](https://gds.slack.com/archives/CHR4UQKU4) for the username and password to view the Knowledge Graph instance.

For more information on the intermediate data files, see the [intermediate data files documentation](/analysis/govgraph/int-data-files/).

For more information on the Knowledge Graph nodes and relationships, see the [nodes and relationships documentation](/analysis/govgraph/nodes-relationships/).
